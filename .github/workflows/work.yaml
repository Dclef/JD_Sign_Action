name: JD_Sign_Action

on:
  repository_dispatch:
  release:
    types: published
  # push:
  #   branches:
  #     - master
  schedule:
    - cron: 0 20 * * *
  watch:
    types: started
    
env:
  JD_COOKIE: ${{ shshshfpa=b006f8df-5461-d0ee-08f4-cdd84e5c2972-1603723412; shshshfpb=sJlHnvmYbChFxnABXEj%2FCRw%3D%3D; __jdu=160372341247447054043; areaId=22; ipLoc-djd=22-1930-49321-0; PCSYCityID=CN_510000_510100_510181; pin=dclef; _tp=RB%2B%2FUaoKZGYihwtfOJTP%2Fw%3D%3D; _pst=dclef; pinId=UCx0LWpXTPA; autoOpenApp_downCloseDate_auto=1606095542759_21600000; user-key=52b4b733-e541-4127-9258-b40044cd6251; unpl=V2_ZzNtbUQHR0UiCRFdL0laVWIEGlwSAEoRfVhOVHhJVQA0CkAKclRCFnQURlRnGl4UZwAZWEBcQxdFCEdkexhdBW4AGl9DVXMlRQtGZHopXAJmARReQFJDFnAOQ1F9GFgAZgYQbXJXSxFFDkZcehFVB28HEV5yAR1AdQ1AZHsRWgFhAhBdSldzFEUJdhUVGV0FYQsVW0AaQxJ0CkBXeRxcBmIFF1hEVkcQdA1EZHopXw%3d%3d; __jdv=122270672|xcx.ubja.vip|t_1001829303_|tuiguang|7a5af0f8ea7a4690af859a912a84b8cf|1606106595159; warehistory="10021983891016,71909839522,100012173262,827069,959838,8358211,12816296,"; TrackID=1zixQCt9gR6JMhyX1HROMoICarrz3-xcJm7UX68-xxBIYL_krQ0bQpaudnlZKnw2LsQfL2-DJQP1zgFCR1PuPDceNtOLHqBmMI9gBc9xPfgM; unick=dclef; ceshi3.com=000; cn=1; 3AB9D23F7A4B3C9B=4PFEJIXMEMPNGHAFLIQT73ZGDSDPAPPPFWURHVEPYLIWSS4U5YV66JF3SM3CBHOLP3ZHHGVNV6HN5VSEKEPZKT5JOU; mobilev=html5; mba_muid=160372341247447054043; __jdc=122270672; jcap_dvzw_fp=edfa5e6b367a90d29e60d4a2c55d9a25$913720306485; TrackerID=S5kewrY2JW7s9ri-sJVXacTOqnwho6Bk717smQGaEL9E76R0WOT5_yJNOMSX9_Z7jpqJGST0_cnPFBNTa9b21koDMJRLi2rrm-ytQinDRKGjBTD0uvkp0Jy-hAsI1P_b; pt_key=AAJfu0OHADAK8B52flqJHB4kH_T8k_L4_GGgMMXw8qgnIIpwOr_AW34hHBtHQLbqu16JIVD73WQ; pt_pin=dclef; pt_token=wm94w96n; pwdt_id=dclef; sfstoken=tk01mcc2f1cdca8sMisyKzN4Misz5nCiz65N8nZY2PQmNoZaTKn4nFBbe82atSfNv+oATXanNnmn4Pa7eIGgEflMFllb; thor=5E8CA8DEBB2A7CCB4A5644A5FD2842D1F7D6AE42BE2BB4FC954550CAC6FD005D1958B32B1744DBF795608CA223DA5EB5CF87B9DC1A0ADDA6280606938A68CD3A84CCC2C37A1B4F3C247CD80B11EC69628405CB46727DD2059A1F5768C87434357949548080F8F6EF9C5F57BC7C5074B5B06FAF80FEBB490DD14EA13A528CF060; __jda=122270672.160372341247447054043.1603723412.1606106586.1606110722.16; __jdb=122270672.9.160372341247447054043|16.1606110722; mba_sid=16061107220486421185552895594.9; shshshfp=a019f4bc91b85df1bb28b8c54a6ccc42; shshshsID=cc0ae6f843fcf05fa943167ac9c36053_12_1606110770145; __jd_ref_cls=MJDVip_Home_NineExpo;  }}
  JD_DUAL_COOKIE: ${{ secrets.JD_DUAL_COOKIE }}
  PUSH_KEY: ${{ SCU90939T0e524720263a09858f27b213eebdb9765e79aacf5b43a }}
  UPLOAD_BESULT_DIR: true

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout codes
              uses: actions/checkout@v2
              
            - name: Use Node.js
              uses: actions/setup-node@v1
              with:
                node-version: '12.x'
                
            - name: Run install
              run: npm install
              
            - name: Run Script
              run: node jd_sign.js
                
            - name: Upload result file
              uses: actions/upload-artifact@master
              if: env.UPLOAD_BESULT_DIR == 'true'
              with:
                name: result
                path: ./*.txt


